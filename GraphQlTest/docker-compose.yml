version: '3.8'

services:
  api:
    build: .
    image: jodurpar/graphqltest
    container_name: graphql-api-remastered
    ports:
      - "15250:15250"
    environment:
      - NODE_ENV=production
      - API_HOST=0.0.0.0
      - DB_SERVER=host.docker.internal
      # Si necesitas sobreescribir usuario o password en Docker, puedes hacerlo aqu√≠:
      # - DB_USER=tu_usuario
      # - DB_PASSWORD=tu_password
    extra_hosts:
      - "host.docker.internal:host-gateway"
    restart: always

  db:
    image: mcr.microsoft.com/mssql/server:2019-latest
    container_name: mssql-db
    environment:
      - ACCEPT_EULA=Y
      - SA_PASSWORD=YourStrong@Passw0rd
    ports:
      - "1434:1433"
